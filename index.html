<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Agendamiento de citas</title>

<!-- FAVICON 🧠 -->
<link rel="icon" href="data:image/svg+xml,
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'>
  <text y='.9em' font-size='90'>🧠</text>
</svg>">

<script src="https://cdn.tailwindcss.com"></script>

<style>
:root {
  --principal: #8b7cf6;
  --bg-main: #0f1220;
  --bg-panel: #171a2e;
  --bg-soft: #1f2340;
  --border-soft: #2d325a;
  --text-main: #e5e7eb;
  --text-muted: #9ca3af;
}

body {
  background-color: var(--bg-main);
  color: var(--text-main);
}

.active {
  background-color: var(--principal);
  color: white;
}

.btn-prof.active div {
  color: white;
}

input, textarea {
  background-color: var(--bg-soft);
  color: var(--text-main);
  border: 1px solid var(--border-soft);
}

input::placeholder {
  color: var(--text-muted);
}

textarea {
  resize: none;
}

iframe {
  background-color: white;
}
</style>

<script>
const profesionales = [
  {
    nombre: "Carol Cano",
    color: "#8b7cf6",
    calendly: "https://calendly.com/milena-cogniversos/40min",
    gcal: "https://calendar.google.com/calendar/embed?src=milena.cogniversos%40gmail.com&ctz=America%2FBogota&mode=WEEK",
    disponibilidad: "Lunes y miércoles 10:00 am – 7:00 pm · Martes, jueves y viernes 9:00 am – 6:00 pm",
    llavePago: "@LB3214854579"
  },
  {
    nombre: "Lorena Gonzalez",
    color: "#6ee7b7",
    calendly: "https://calendly.com/lorenag-cogniversos/sesion-terapia",
    gcal: "https://calendar.google.com/calendar/embed?src=lorenag.cogniversos%40gmail.com&ctz=America%2FBogota&mode=WEEK",
    disponibilidad: "Lunes a sábado 9:00 am – 12 pm · 6:00 pm – 9:00 pm",
    llavePago: "@LB3214854579"
  },
  {
    nombre: "Karen Useche",
    color: "#60a5fa",
    calendly: "https://calendly.com/karen-cogniversos/sesion-terapia",
    gcal: "https://calendar.google.com/calendar/embed?src=karen.cogniversos%40gmail.com&ctz=America%2FBogota&mode=WEEK",
    disponibilidad: "Lunes a viernes 3:40 pm – 8:00 pm",
    llavePago: "@LB3143260828"
  },
  {
    nombre: "María Fernanda Arboleda",
    color: "#c084fc",
    calendly: "https://calendly.com/mafernanda-cogniversos/40min",
    gcal: "https://calendar.google.com/calendar/embed?src=mafernanda.cogniversos%40gmail.com&ctz=America%2FBogota&mode=WEEK",
    disponibilidad: "Lunes a viernes 9:40 am – 5:00 pm",
    llavePago: "@LB3143260828"
  },
  {
    nombre: "Alejandra Ospina",
    color: "#5eead4",
    calendly: "https://calendly.com/alejandra-cogniversos/40min",
    gcal: "https://calendar.google.com/calendar/embed?src=alejandra.cogniversos%40gmail.com&ctz=America%2FBogota&mode=WEEK",
    disponibilidad: "Lunes a sábado 9:00 am – 12:00 pm · 5:00 pm – 9:00 pm",
    llavePago: "@LB3214854579"
  },
  {
    nombre: "Johanna Elizalde",
    color: "#fbbf24",
    calendly: "https://calendly.com/johanna-cogniversos/40min",
    gcal: "https://calendar.google.com/calendar/embed?src=johanna.cogniversos%40gmail.com&ctz=America%2FBogota&mode=WEEK",
    disponibilidad: "Lunes a sábado 9:00 am – 6:00 pm",
    llavePago: "@LB3214854579"
  },
  {
    nombre: "Tatiana Cano",
    color: "#94a3b8",
    calendly: "https://calendly.com/tatiana-cogniversos/40min",
    gcal: "https://calendar.google.com/calendar/embed?src=tatiana.cogniversos%40gmail.com&ctz=America%2FBogota&mode=WEEK",
    disponibilidad: "Lunes a sábado 12:00 pm – 9:00 pm",
    llavePago: "@LB3214854579"
  }
];

let profesionalActivo = null;

function cargarAgenda(index) {
  const p = profesionales[index];
  profesionalActivo = p;

  document.getElementById("nombreActivo").innerText = p.nombre;
  document.getElementById("nombreActivo").style.color = p.color;
  document.getElementById("calendlyFrame").src = p.calendly;
  document.getElementById("calendarFrame").src = p.gcal;
  document.getElementById("llavePago").value = p.llavePago;

  document.querySelectorAll(".btn-prof").forEach(b => b.classList.remove("active"));
  document.getElementById(`btn-${index}`).classList.add("active");

  generarMensaje();
}

function generarMensaje() {
  if (!profesionalActivo) return;

  const fecha = document.getElementById("fecha").value;
  const hora = document.getElementById("hora").value;
  const meet = document.getElementById("meet").value;
  const llave = document.getElementById("llavePago").value;

  document.getElementById("mensaje").value = `
Te confirmo la cita
${fecha}, ${hora}
Psicóloga: ${profesionalActivo.nombre}
Link de Google Meet: ${meet}

Recuerda que puedes hacer el pago de la sesión hasta 1 hora antes por la llave ${llave}

 En caso de que necesites cancelar o reagendar, debes hacerlo con mínimo 12 horas de anticipación. Si lo haces después de este tiempo, deberás asumir el costo total de la sesión, dado que ese espacio ya estaba reservado en la agenda de la psicóloga 😊
`.trim();
}

function copiarMensaje() {
  navigator.clipboard.writeText(document.getElementById("mensaje").value);
  alert("Mensaje copiado ✅");
}

/* 🔑 ATAJOS DE TECLADO */
document.addEventListener("keydown", (e) => {
  const tag = e.target.tagName.toLowerCase();
  if (tag === "input" || tag === "textarea") return;

  const n = parseInt(e.key);
  if (!isNaN(n) && n >= 1 && n <= profesionales.length) {
    cargarAgenda(n - 1);
  }
});
</script>
</head>

<body class="h-screen overflow-hidden">

<header class="px-6 py-4 border-b" style="background:var(--bg-panel); border-color:var(--border-soft)">
  <h1 class="text-2xl font-bold text-[var(--principal)]">
    Agendamiento de citas
  </h1>
</header>

<main class="flex h-[calc(100vh-90px)]">

  <!-- PANEL IZQUIERDO -->
  <aside class="w-1/3 p-4 overflow-y-auto" style="background:var(--bg-panel)">
    <h2 class="font-semibold mb-3 text-gray-300">Profesionales</h2>

    <div class="space-y-2 mb-4">
      <script>
        profesionales.forEach((p, i) => {
          document.write(`
            <button id="btn-${i}" onclick="cargarAgenda(${i})"
            class="btn-prof w-full text-left px-4 py-2 rounded hover:bg-[#232860] transition">
              <div class="font-medium">${p.nombre}</div>
              <div class="text-xs text-gray-400">${p.disponibilidad}</div>
            </button>
          `);
        });
      </script>
    </div>

    <h3 id="nombreActivo" class="font-bold mb-2">
      Copia el mensaje para WhatsApp
    </h3>

    <input id="fecha" placeholder="Fecha" class="p-2 w-full mb-2" oninput="generarMensaje()">
    <input id="hora" placeholder="Hora" class="p-2 w-full mb-2" oninput="generarMensaje()">
    <input id="meet" placeholder="Link Meet" class="p-2 w-full mb-2" oninput="generarMensaje()">
    <input id="llavePago" class="p-2 w-full mb-2" oninput="generarMensaje()">

    <textarea id="mensaje" class="w-full h-40 p-2 mb-2" readonly></textarea>

    <button
      onclick="copiarMensaje()"
      class="w-full py-2 rounded text-white font-medium"
      style="background:var(--principal)">
      Copiar mensaje
    </button>
  </aside>

  <!-- PANEL DERECHO -->
  <section class="flex-1 grid grid-cols-2 gap-3 p-4" style="background:var(--bg-main)">
    <iframe
      id="calendlyFrame"
      class="w-full h-full rounded bg-white"
      allow="camera; microphone; fullscreen; autoplay"
      referrerpolicy="no-referrer-when-downgrade">
    </iframe>

    <iframe
      id="calendarFrame"
      class="w-full h-full rounded bg-white"
      referrerpolicy="no-referrer-when-downgrade">
    </iframe>
  </section>

</main>
</body>
</html>
